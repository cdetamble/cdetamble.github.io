<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8"> 
	<title>MouthlessGames</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Lato|Permanent+Marker" rel="stylesheet">
	
	<!-- Favicon -->
	<link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
	<link rel="manifest" href="manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	 
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
</head>
<body>

	<main>
		<h1>
			<img id="logo" class="circle-hover" src="img/mg.jpg" style="border-radius: 50%;">
			<span class="title text-3d">MouthlessGames</span>
		</h1>
		<p class="sub-title smaller">Making <b>Mind-Bending</b> Games.</p>

		<div class="image-container">
		  <a href="https://twitter.com/MouthlessGames">
			<img id="promo_image" src="img/evelyn.jpg" title="Follow development on Twitter">
		  </a>
		  <div class="centered">
			<p class="">Closed Demo Release at<br id="break"> <b>August 25, 2019</b></p>
			<div id="subscribe-box" class="input-group">
				<form id="myForm">
					<div class="form-group">
						<div class="input-group">
							<input id="mail" type="email" class="form-control input-lg" placeholder="your@email.com" title="Enter the mail address you want to be notified at">
							<span class="input-group-btn">
								<input id="subscribe" class="btn btn-primary btn-lg" type="submit" value="I wanna play the Demo!" title="Subscribe for the closed demo which relases at August 25, 2019">
							</span>
						</div>
					</div>
				</form>
			</div><!-- /input-group -->
		  </div>
		</div>
		
		<p class="smaller">Copyright &copy; 2019 Â· <a href="mailto:info@mouthlessgames.com">Christian DeTamble</a></p>
		<br>
	</main>


	<!-- Modal -->
	<div id="myModal" class="modal fade" role="dialog">
	  <div class="modal-dialog">

		<!-- Modal content-->
		<div class="modal-content">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">&times;</button>
			<h4 id="modal-title" class="modal-title">Information</h4>
		  </div>
		  <div class="modal-body">
			<p id="modal-message">Something went wrong.</p>
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-success" data-dismiss="modal">Yay!</button>
		  </div>
		</div>

	  </div>
	</div>

	<script>
		function findGetParameter(parameterName) {
			var result = null, tmp = [];
			location.search
				.substr(1)
				.split("&")
				.forEach(function (item) {
				  tmp = item.split("=");
				  if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
				});
			return result;
		}
		function validateEmail(email) {
			var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
			return re.test(String(email).toLowerCase());
		}

		const message = findGetParameter('modal_message');
		if (message) {
			$('#myModal').on('hidden.bs.modal', function () {
				window.location.href = "https://mouthlessgames.com";
			});
			const title = findGetParameter('modal_title');
			if (title) {
				$('#modal-title').html(title);
			}
			$('#modal-message').html(message);
			$('#myModal').modal('show');
		}
		
		$('#myForm').submit(function(e){
			e.preventDefault();
			$('#subscribe').click();
		});
		$('#subscribe').click(function () {
			const mail = $('#mail').val();
			if (mail && mail.length > 0) {
				if (validateEmail(mail)) {
					const subscribedFor = "Evelyn von Wolkenstein Demo Release";
					const successMessage = "Thank you for subscribing!<br> You will be notified as soon as the demo is out.";
					
					window.location.href = "http://therefactory.bplaced.net/api/subscribe.php?mail_address=" + encodeURIComponent(mail)
						+ "&subscribed_for=" + encodeURIComponent(subscribedFor)
						+ "&success_message=" + encodeURIComponent(successMessage);
				}
			}
		});
	</script>
</body>
</html>
